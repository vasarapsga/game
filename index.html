function showHighScore() {
            const highScoreOverlay = document.createElement('div');
            highScoreOverlay.id = 'highScoreOverlay';
            highScoreOverlay.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                z-index: 200;
                color: #fff;
                font-size: 1.5em;
                text-shadow: 0 0 20px #ffff00;
            `;
            
            highScoreOverlay.innerHTML = `
                <h2 style="margin-bottom: 30px; background: linear-gradient(45deg, #ffff00, #ff8800); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2.5em;">üèÜ –†–ï–ö–û–†–î–´</h2>
                <div style="background: rgba(255, 255, 255, 0.1); padding: 30px; border-radius: 15px; margin-bottom: 30px; border: 2px solid #ffff00;">
                    <p style="margin-bottom: 15<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Racer - –ü–ª–∞—Ç—Ñ–æ—Ä–º–µ—Ä –ì–æ–Ω–∫–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a0033 50%, #000066 100%);
            overflow: hidden;
            color: #fff;
        }

        #gameContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #menu {
            text-align: center;
            z-index: 100;
            animation: glow 2s ease-in-out infinite alternate;
        }

        #menu h1 {
            font-size: 4em;
            background: linear-gradient(45deg, #ff00ff, #00ffff, #ffff00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            text-shadow: 0 0 30px rgba(255, 0, 255, 0.5);
        }

        .menu-btn {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            border: none;
            padding: 15px 30px;
            margin: 10px;
            font-size: 1.2em;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
        }

        .menu-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(255, 0, 255, 0.8);
        }

        #gameCanvas {
            border: 2px solid #00ffff;
            border-radius: 10px;
            box-shadow: 0 0 50px rgba(0, 255, 255, 0.5);
            display: none;
            background: linear-gradient(180deg, #000033 0%, #000066 100%);
        }

        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 50;
            font-size: 1.2em;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
        }

        #controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            font-size: 0.9em;
            opacity: 0.7;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: radial-gradient(circle, #fff, transparent);
            border-radius: 50%;
            pointer-events: none;
            animation: float 3s linear infinite;
        }

        @keyframes glow {
            0% { text-shadow: 0 0 20px rgba(255, 0, 255, 0.5); }
            100% { text-shadow: 0 0 40px rgba(0, 255, 255, 0.8); }
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="menu">
            <h1>NEON RACER</h1>
            <button class="menu-btn" onclick="startGame()">üèÅ –°–¢–ê–†–¢</button>
            <button class="menu-btn" onclick="showControls()">‚öôÔ∏è –£–ü–†–ê–í–õ–ï–ù–ò–ï</button>
            <button class="menu-btn" onclick="showHighScore()">üèÜ –†–ï–ö–û–†–î–´</button>
        </div>

        <canvas id="gameCanvas" width="1000" height="600"></canvas>
        
        <div id="ui" class="hidden">
            <div>–û—á–∫–∏: <span id="score">0</span></div>
            <div>–£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></div>
            <div>–ñ–∏–∑–Ω–∏: <span id="lives">3</span></div>
            <button onclick="pauseGame()" style="margin-top: 10px; padding: 5px 10px; background: #ff00ff; border: none; color: #000; border-radius: 5px; cursor: pointer;">‚è∏Ô∏è –ü–ê–£–ó–ê</button>
        </div>

        <div id="controls" class="hidden">
            <div>üéÆ WASD –∏–ª–∏ ‚Üê ‚Üí ‚Üë ‚Üì - –¥–≤–∏–∂–µ–Ω–∏–µ | SPACE - –ø—Ä—ã–∂–æ–∫ | ESC - –º–µ–Ω—é</div>
        </div>
    </div>

    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let canvas, ctx;
        let gameState = 'menu'; // menu, playing, paused, gameOver
        let score = 0, level = 1, lives = 3;
        let animationId;
        let isPaused = false;
        let highScore = parseInt(localStorage.getItem('neonRacerHighScore')) || 0;

        // –ò–≥—Ä–æ–∫
        let player = {
            x: 100,
            y: 400,
            width: 30,
            height: 30,
            vx: 0,
            vy: 0,
            speed: 5,
            jumpPower: 15,
            onGround: false,
            color: '#ff00ff',
            trail: []
        };

        // –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã
        let platforms = [];
        let enemies = [];
        let collectibles = [];
        let particles = [];

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        let keys = {};

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            createParticles();
            
            document.addEventListener('keydown', (e) => {
                keys[e.code] = true;
                if (e.code === 'Escape') {
                    if (gameState === 'playing') pauseGame();
                    else if (gameState === 'paused') resumeGame();
                }
            });
            
            document.addEventListener('keyup', (e) => {
                keys[e.code] = false;
            });
        }

        function createParticles() {
            for (let i = 0; i < 50; i++) {
                createParticle();
            }
        }

        function createParticle() {
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.style.left = Math.random() * 100 + 'vw';
            particle.style.animationDelay = Math.random() * 3 + 's';
            document.body.appendChild(particle);
            
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 3000);
        }

        function startGame() {
            gameState = 'playing';
            score = 0;
            level = 1;
            lives = 3;
            
            document.getElementById('menu').classList.add('hidden');
            document.getElementById('gameCanvas').style.display = 'block';
            document.getElementById('ui').classList.remove('hidden');
            document.getElementById('controls').classList.remove('hidden');
            
            resetPlayer();
            generateLevel();
            gameLoop();
            
            setInterval(createParticle, 100);
        }

        function resetPlayer() {
            player.x = 100;
            player.y = 400;
            player.vx = 0;
            player.vy = 0;
            player.onGround = false;
            player.trail = [];
        }

        function generateLevel() {
            platforms = [];
            enemies = [];
            collectibles = [];

            // –ë–∞–∑–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å
            platforms.push({x: 0, y: 550, width: 1000, height: 50, color: '#00ffff'});

            switch(level) {
                case 1:
                    platforms.push(...[
                        {x: 200, y: 450, width: 150, height: 20, color: '#ff00ff'},
                        {x: 400, y: 350, width: 150, height: 20, color: '#ff00ff'},
                        {x: 600, y: 250, width: 150, height: 20, color: '#ff00ff'},
                        {x: 800, y: 150, width: 150, height: 20, color: '#ff00ff'}
                    ]);
                    enemies.push(...[
                        {x: 250, y: 420, width: 25, height: 25, vx: 2, color: '#ff4444', minX: 200, maxX: 350},
                        {x: 450, y: 320, width: 25, height: 25, vx: -2, color: '#ff4444', minX: 400, maxX: 550}
                    ]);
                    collectibles.push(...[
                        {x: 230, y: 400, width: 15, height: 15, collected: false},
                        {x: 430, y: 300, width: 15, height: 15, collected: false},
                        {x: 630, y: 200, width: 15, height: 15, collected: false},
                        {x: 830, y: 100, width: 15, height: 15, collected: false}
                    ]);
                    break;

                case 2:
                    platforms.push(...[
                        {x: 100, y: 500, width: 100, height: 20, color: '#ff00ff'},
                        {x: 300, y: 400, width: 80, height: 20, color: '#ff00ff'},
                        {x: 500, y: 300, width: 80, height: 20, color: '#ff00ff'},
                        {x: 700, y: 200, width: 80, height: 20, color: '#ff00ff'},
                        {x: 850, y: 100, width: 120, height: 20, color: '#ff00ff'},
                        {x: 150, y: 250, width: 100, height: 20, color: '#ffff00'},
                        {x: 600, y: 450, width: 100, height: 20, color: '#ffff00'}
                    ]);
                    enemies.push(...[
                        {x: 120, y: 470, width: 25, height: 25, vx: 1.5, color: '#ff4444', minX: 100, maxX: 200},
                        {x: 320, y: 370, width: 25, height: 25, vx: -1.5, color: '#ff4444', minX: 300, maxX: 380},
                        {x: 520, y: 270, width: 25, height: 25, vx: 1.5, color: '#ff4444', minX: 500, maxX: 580},
                        {x: 720, y: 170, width: 25, height: 25, vx: -2, color: '#ff4444', minX: 700, maxX: 780}
                    ]);
                    collectibles.push(...[
                        {x: 130, y: 470, width: 15, height: 15, collected: false},
                        {x: 330, y: 370, width: 15, height: 15, collected: false},
                        {x: 530, y: 270, width: 15, height: 15, collected: false},
                        {x: 730, y: 170, width: 15, height: 15, collected: false},
                        {x: 880, y: 70, width: 15, height: 15, collected: false},
                        {x: 180, y: 220, width: 15, height: 15, collected: false}
                    ]);
                    break;

                case 3:
                    platforms.push(...[
                        {x: 50, y: 480, width: 60, height: 20, color: '#ff00ff'},
                        {x: 200, y: 420, width: 60, height: 20, color: '#ff00ff'},
                        {x: 350, y: 360, width: 60, height: 20, color: '#ff00ff'},
                        {x: 500, y: 300, width: 60, height: 20, color: '#ff00ff'},
                        {x: 650, y: 240, width: 60, height: 20, color: '#ff00ff'},
                        {x: 800, y: 180, width: 60, height: 20, color: '#ff00ff'},
                        {x: 900, y: 120, width: 80, height: 20, color: '#ff00ff'},
                        {x: 300, y: 180, width: 80, height: 20, color: '#ffff00'},
                        {x: 150, y: 300, width: 80, height: 20, color: '#ffff00'}
                    ]);
                    enemies.push(...[
                        {x: 60, y: 450, width: 25, height: 25, vx: 1, color: '#ff4444', minX: 50, maxX: 110},
                        {x: 210, y: 390, width: 25, height: 25, vx: -1, color: '#ff4444', minX: 200, maxX: 260},
                        {x: 360, y: 330, width: 25, height: 25, vx: 1, color: '#ff4444', minX: 350, maxX: 410},
                        {x: 510, y: 270, width: 25, height: 25, vx: -1, color: '#ff4444', minX: 500, maxX: 560},
                        {x: 660, y: 210, width: 25, height: 25, vx: 1, color: '#ff4444', minX: 650, maxX: 710},
                        {x: 810, y: 150, width: 25, height: 25, vx: -1, color: '#ff4444', minX: 800, maxX: 860}
                    ]);
                    collectibles.push(...[
                        {x: 75, y: 450, width: 15, height: 15, collected: false},
                        {x: 225, y: 390, width: 15, height: 15, collected: false},
                        {x: 375, y: 330, width: 15, height: 15, collected: false},
                        {x: 525, y: 270, width: 15, height: 15, collected: false},
                        {x: 675, y: 210, width: 15, height: 15, collected: false},
                        {x: 825, y: 150, width: 15, height: 15, collected: false},
                        {x: 925, y: 90, width: 15, height: 15, collected: false}
                    ]);
                    break;

                case 4:
                    platforms.push(...[
                        {x: 100, y: 500, width: 120, height: 20, color: '#ff00ff'},
                        {x: 300, y: 450, width: 100, height: 20, color: '#ff00ff'},
                        {x: 480, y: 380, width: 80, height: 20, color: '#ff00ff'},
                        {x: 620, y: 320, width: 80, height: 20, color: '#ff00ff'},
                        {x: 750, y: 250, width: 100, height: 20, color: '#ff00ff'},
                        {x: 50, y: 350, width: 120, height: 20, color: '#ffff00'},
                        {x: 250, y: 280, width: 120, height: 20, color: '#ffff00'},
                        {x: 450, y: 180, width: 120, height: 20, color: '#ffff00'},
                        {x: 700, y: 120, width: 150, height: 20, color: '#ffff00'}
                    ]);
                    enemies.push(...[
                        {x: 120, y: 470, width: 25, height: 25, vx: 2, color: '#ff4444', minX: 100, maxX: 220},
                        {x: 320, y: 420, width: 25, height: 25, vx: -2, color: '#ff4444', minX: 300, maxX: 400},
                        {x: 500, y: 350, width: 25, height: 25, vx: 1.5, color: '#ff4444', minX: 480, maxX: 560},
                        {x: 640, y: 290, width: 25, height: 25, vx: -1.5, color: '#ff4444', minX: 620, maxX: 700},
                        {x: 770, y: 220, width: 25, height: 25, vx: 2, color: '#ff4444', minX: 750, maxX: 850}
                    ]);
                    collectibles.push(...[
                        {x: 140, y: 470, width: 15, height: 15, collected: false},
                        {x: 340, y: 420, width: 15, height: 15, collected: false},
                        {x: 510, y: 350, width: 15, height: 15, collected: false},
                        {x: 650, y: 290, width: 15, height: 15, collected: false},
                        {x: 780, y: 220, width: 15, height: 15, collected: false},
                        {x: 90, y: 320, width: 15, height: 15, collected: false},
                        {x: 290, y: 250, width: 15, height: 15, collected: false},
                        {x: 490, y: 150, width: 15, height: 15, collected: false}
                    ]);
                    break;

                case 5:
                    platforms.push(...[
                        {x: 80, y: 520, width: 80, height: 15, color: '#ff00ff'},
                        {x: 220, y: 480, width: 60, height: 15, color: '#ff00ff'},
                        {x: 350, y: 430, width: 60, height: 15, color: '#ff00ff'},
                        {x: 480, y: 380, width: 60, height: 15, color: '#ff00ff'},
                        {x: 610, y: 330, width: 60, height: 15, color: '#ff00ff'},
                        {x: 740, y: 280, width: 60, height: 15, color: '#ff00ff'},
                        {x: 850, y: 220, width: 80, height: 15, color: '#ff00ff'},
                        {x: 150, y: 350, width: 100, height: 15, color: '#ffff00'},
                        {x: 400, y: 250, width: 100, height: 15, color: '#ffff00'},
                        {x: 650, y: 150, width: 100, height: 15, color: '#ffff00'},
                        {x: 300, y: 100, width: 150, height: 15, color: '#00ff00'}
                    ]);
                    enemies.push(...[
                        {x: 90, y: 490, width: 20, height: 20, vx: 1.5, color: '#ff4444', minX: 80, maxX: 160},
                        {x: 230, y: 450, width: 20, height: 20, vx: -1.5, color: '#ff4444', minX: 220, maxX: 280},
                        {x: 360, y: 400, width: 20, height: 20, vx: 1.5, color: '#ff4444', minX: 350, maxX: 410},
                        {x: 490, y: 350, width: 20, height: 20, vx: -1.5, color: '#ff4444', minX: 480, maxX: 540},
                        {x: 620, y: 300, width: 20, height: 20, vx: 1.5, color: '#ff4444', minX: 610, maxX: 670},
                        {x: 750, y: 250, width: 20, height: 20, vx: -1.5, color: '#ff4444', minX: 740, maxX: 800},
                        {x: 860, y: 190, width: 20, height: 20, vx: 2, color: '#ff4444', minX: 850, maxX: 930}
                    ]);
                    collectibles.push(...[
                        {x: 110, y: 490, width: 12, height: 12, collected: false},
                        {x: 240, y: 450, width: 12, height: 12, collected: false},
                        {x: 370, y: 400, width: 12, height: 12, collected: false},
                        {x: 500, y: 350, width: 12, height: 12, collected: false},
                        {x: 630, y: 300, width: 12, height: 12, collected: false},
                        {x: 760, y: 250, width: 12, height: 12, collected: false},
                        {x: 870, y: 190, width: 12, height: 12, collected: false},
                        {x: 180, y: 320, width: 12, height: 12, collected: false},
                        {x: 430, y: 220, width: 12, height: 12, collected: false},
                        {x: 680, y: 120, width: 12, height: 12, collected: false}
                    ]);
                    break;

                default:
                    // –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω–æ
                    let platformCount = Math.min(5 + level, 15);
                    let enemyCount = Math.min(2 + Math.floor(level/2), 10);
                    let collectibleCount = Math.min(3 + level, 12);

                    for(let i = 0; i < platformCount; i++) {
                        platforms.push({
                            x: Math.random() * (canvas.width - 100),
                            y: 150 + Math.random() * 350,
                            width: 80 + Math.random() * 100,
                            height: 15 + Math.random() * 10,
                            color: Math.random() > 0.7 ? '#ffff00' : '#ff00ff'
                        });
                    }

                    for(let i = 0; i < enemyCount; i++) {
                        let platform = platforms[Math.floor(Math.random() * platforms.length)];
                        enemies.push({
                            x: platform.x + 10,
                            y: platform.y - 25,
                            width: 20,
                            height: 20,
                            vx: (Math.random() > 0.5 ? 1 : -1) * (1 + Math.random() * 2),
                            color: '#ff4444',
                            minX: platform.x,
                            maxX: platform.x + platform.width - 20
                        });
                    }

                    for(let i = 0; i < collectibleCount; i++) {
                        let platform = platforms[Math.floor(Math.random() * platforms.length)];
                        collectibles.push({
                            x: platform.x + Math.random() * (platform.width - 15),
                            y: platform.y - 20,
                            width: 12,
                            height: 12,
                            collected: false
                        });
                    }
            }
        }

        function handleInput() {
            if (keys['KeyA'] || keys['ArrowLeft']) {
                player.vx = -player.speed;
            } else if (keys['KeyD'] || keys['ArrowRight']) {
                player.vx = player.speed;
            } else {
                player.vx *= 0.8;
            }

            if ((keys['KeyW'] || keys['ArrowUp'] || keys['Space']) && player.onGround) {
                player.vy = -player.jumpPower;
                player.onGround = false;
            }
        }

        function updatePlayer() {
            // –§–∏–∑–∏–∫–∞
            player.vy += 0.8; // –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è
            player.x += player.vx;
            player.y += player.vy;

            // –°–ª–µ–¥ –∑–∞ –∏–≥—Ä–æ–∫–æ–º
            player.trail.push({x: player.x + player.width/2, y: player.y + player.height/2});
            if (player.trail.length > 10) player.trail.shift();

            // –ì—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞
            if (player.x < 0) player.x = 0;
            if (player.x + player.width > canvas.width) player.x = canvas.width - player.width;
            if (player.y > canvas.height) {
                lives--;
                if (lives <= 0) gameOver();
                else resetPlayer();
            }

            player.onGround = false;
        }

        function checkCollisions() {
            // –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã
            platforms.forEach(platform => {
                if (player.x < platform.x + platform.width &&
                    player.x + player.width > platform.x &&
                    player.y < platform.y + platform.height &&
                    player.y + player.height > platform.y) {
                    
                    if (player.vy > 0 && player.y < platform.y) {
                        player.y = platform.y - player.height;
                        player.vy = 0;
                        player.onGround = true;
                    }
                }
            });

            // –í—Ä–∞–≥–∏
            enemies.forEach(enemy => {
                if (player.x < enemy.x + enemy.width &&
                    player.x + player.width > enemy.x &&
                    player.y < enemy.y + enemy.height &&
                    player.y + player.height > enemy.y) {
                    
                    lives--;
                    if (lives <= 0) gameOver();
                    else resetPlayer();
                }
            });

            // –ü—Ä–µ–¥–º–µ—Ç—ã –¥–ª—è —Å–±–æ—Ä–∞
            collectibles.forEach(item => {
                if (!item.collected &&
                    player.x < item.x + item.width &&
                    player.x + player.width > item.x &&
                    player.y < item.y + item.height &&
                    player.y + player.height > item.y) {
                    
                    item.collected = true;
                    score += 100;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
                    if (collectibles.every(c => c.collected)) {
                        level++;
                        generateLevel();
                        resetPlayer();
                    }
                }
            });
        }

        function updateEnemies() {
            enemies.forEach(enemy => {
                enemy.x += enemy.vx;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü –¥–ª—è –≤—Ä–∞–≥–æ–≤ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–µ–¥–µ–ª–∞–º–∏
                if (enemy.minX !== undefined && enemy.maxX !== undefined) {
                    if (enemy.x <= enemy.minX || enemy.x >= enemy.maxX) {
                        enemy.vx = -enemy.vx;
                        enemy.x = Math.max(enemy.minX, Math.min(enemy.maxX, enemy.x));
                    }
                } else {
                    // –û—Ç—Å–∫–æ–∫ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º –∏ –≥—Ä–∞–Ω–∏—Ü —ç–∫—Ä–∞–Ω–∞
                    let onPlatform = false;
                    platforms.forEach(platform => {
                        if (enemy.x < platform.x + platform.width &&
                            enemy.x + enemy.width > platform.x &&
                            enemy.y + enemy.height >= platform.y &&
                            enemy.y + enemy.height <= platform.y + platform.height) {
                            onPlatform = true;
                        }
                    });
                    
                    if (enemy.x <= 0 || enemy.x + enemy.width >= canvas.width || !onPlatform) {
                        enemy.vx = -enemy.vx;
                    }
                }
            });
        }

        function draw() {
            // –û—á–∏—Å—Ç–∫–∞ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#000033');
            gradient.addColorStop(1, '#000066');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // –ó–≤–µ–∑–¥—ã
            ctx.fillStyle = '#ffffff';
            for (let i = 0; i < 100; i++) {
                const x = (i * 137.5) % canvas.width;
                const y = (i * 43.7) % canvas.height;
                ctx.fillRect(x, y, 1, 1);
            }

            // –°–ª–µ–¥ –∏–≥—Ä–æ–∫–∞
            ctx.strokeStyle = '#ff00ff';
            ctx.lineWidth = 3;
            ctx.beginPath();
            player.trail.forEach((point, i) => {
                if (i === 0) ctx.moveTo(point.x, point.y);
                else ctx.lineTo(point.x, point.y);
            });
            ctx.stroke();

            // –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã —Å —Å–≤–µ—á–µ–Ω–∏–µ–º
            platforms.forEach(platform => {
                ctx.shadowColor = platform.color;
                ctx.shadowBlur = 10;
                ctx.fillStyle = platform.color;
                ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
            });

            // –ò–≥—Ä–æ–∫ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
            ctx.shadowColor = player.color;
            ctx.shadowBlur = 15;
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x, player.y, player.width, player.height);
            
            // –ì–ª–∞–∑–∞ –∏–≥—Ä–æ–∫–∞
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(player.x + 8, player.y + 8, 4, 4);
            ctx.fillRect(player.x + 18, player.y + 8, 4, 4);

            // –í—Ä–∞–≥–∏
            enemies.forEach(enemy => {
                ctx.shadowColor = enemy.color;
                ctx.shadowBlur = 10;
                ctx.fillStyle = enemy.color;
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
            });

            // –ü—Ä–µ–¥–º–µ—Ç—ã –¥–ª—è —Å–±–æ—Ä–∞
            collectibles.forEach(item => {
                if (!item.collected) {
                    ctx.shadowColor = '#ffff00';
                    ctx.shadowBlur = 15;
                    ctx.fillStyle = '#ffff00';
                    ctx.beginPath();
                    ctx.arc(item.x + item.width/2, item.y + item.height/2, item.width/2, 0, Math.PI * 2);
                    ctx.fill();
                }
            });

            ctx.shadowBlur = 0;
        }

        function updateUI() {
            document.getElementById('score').textContent = score;
            document.getElementById('level').textContent = level;
            document.getElementById('lives').textContent = lives;
        }

        function gameLoop() {
            if (gameState !== 'playing') return;

            handleInput();
            updatePlayer();
            updateEnemies();
            checkCollisions();
            draw();
            updateUI();

            animationId = requestAnimationFrame(gameLoop);
        }

        function pauseGame() {
            if (gameState === 'playing') {
                gameState = 'paused';
                isPaused = true;
                cancelAnimationFrame(animationId);
                
                // –°–æ–∑–¥–∞–µ–º overlay –¥–ª—è –ø–∞—É–∑—ã
                const pauseOverlay = document.createElement('div');
                pauseOverlay.id = 'pauseOverlay';
                pauseOverlay.style.cssText = `
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.8);
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    z-index: 200;
                    color: #fff;
                    font-size: 2em;
                    text-shadow: 0 0 20px #ff00ff;
                `;
                pauseOverlay.innerHTML = `
                    <h2 style="margin-bottom: 30px; background: linear-gradient(45deg, #ff00ff, #00ffff); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">‚è∏Ô∏è –ò–ì–†–ê –ù–ê –ü–ê–£–ó–ï</h2>
                    <button onclick="resumeGame()" style="background: linear-gradient(45deg, #ff00ff, #00ffff); border: none; padding: 15px 30px; margin: 10px; font-size: 0.8em; color: #000; font-weight: bold; cursor: pointer; border-radius: 25px;">‚ñ∂Ô∏è –ü–†–û–î–û–õ–ñ–ò–¢–¨</button>
                    <button onclick="showMenu()" style="background: linear-gradient(45deg, #ff4444, #ff8800); border: none; padding: 15px 30px; margin: 10px; font-size: 0.8em; color: #000; font-weight: bold; cursor: pointer; border-radius: 25px;">üè† –í –ú–ï–ù–Æ</button>
                `;
                document.getElementById('gameContainer').appendChild(pauseOverlay);
            }
        }

        function resumeGame() {
            const pauseOverlay = document.getElementById('pauseOverlay');
            if (pauseOverlay) {
                pauseOverlay.remove();
            }
            gameState = 'playing';
            isPaused = false;
            gameLoop();
        }

        function gameOver() {
            gameState = 'gameOver';
            cancelAnimationFrame(animationId);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∫–æ—Ä–¥
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('neonRacerHighScore', highScore);
            }
            
            setTimeout(() => {
                const gameOverOverlay = document.createElement('div');
                gameOverOverlay.id = 'gameOverOverlay';
                gameOverOverlay.style.cssText = `
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.9);
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    z-index: 200;
                    color: #fff;
                    font-size: 1.5em;
                    text-shadow: 0 0 20px #ff0000;
                `;
                
                const isNewRecord = score === highScore && score > 0;
                gameOverOverlay.innerHTML = `
                    <h2 style="margin-bottom: 20px; background: linear-gradient(45deg, #ff0000, #ff4444); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2em;">üíÄ –ò–ì–†–ê –û–ö–û–ù–ß–ï–ù–ê</h2>
                    ${isNewRecord ? '<p style="color: #ffff00; font-size: 1.2em; margin-bottom: 10px;">üéâ –ù–û–í–´–ô –†–ï–ö–û–†–î! üéâ</p>' : ''}
                    <p style="margin-bottom: 10px;">–í–∞—à —Å—á–µ—Ç: <span style="color: #00ffff;">${score}</span></p>
                    <p style="margin-bottom: 10px;">–£—Ä–æ–≤–µ–Ω—å: <span style="color: #ff00ff;">${level}</span></p>
                    <p style="margin-bottom: 30px;">–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <span style="color: #ffff00;">${highScore}</span></p>
                    <button onclick="startGame(); document.getElementById('gameOverOverlay').remove();" style="background: linear-gradient(45deg, #ff00ff, #00ffff); border: none; padding: 15px 30px; margin: 10px; font-size: 0.8em; color: #000; font-weight: bold; cursor: pointer; border-radius: 25px;">üéÆ –ò–ì–†–ê–¢–¨ –°–ù–û–í–ê</button>
                    <button onclick="showMenu(); document.getElementById('gameOverOverlay').remove();" style="background: linear-gradient(45deg, #ff4444, #ff8800); border: none; padding: 15px 30px; margin: 10px; font-size: 0.8em; color: #000; font-weight: bold; cursor: pointer; border-radius: 25px;">üè† –í –ú–ï–ù–Æ</button>
                `;
                document.getElementById('gameContainer').appendChild(gameOverOverlay);
            }, 100);
        }

        function showMenu() {
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ –æ–≤–µ—Ä–ª–µ–∏
            const pauseOverlay = document.getElementById('pauseOverlay');
            const gameOverOverlay = document.getElementById('gameOverOverlay');
            if (pauseOverlay) pauseOverlay.remove();
            if (gameOverOverlay) gameOverOverlay.remove();
            
            document.getElementById('menu').classList.remove('hidden');
            document.getElementById('gameCanvas').style.display = 'none';
            document.getElementById('ui').classList.add('hidden');
            document.getElementById('controls').classList.add('hidden');
            gameState = 'menu';
            cancelAnimationFrame(animationId);
        }

        function showControls() {
            alert('üéÆ –£–ü–†–ê–í–õ–ï–ù–ò–ï:\n\n' +
                  '‚Üê ‚Üí (A D) - –¥–≤–∏–∂–µ–Ω–∏–µ –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ\n' +
                  '‚Üë (W SPACE) - –ø—Ä—ã–∂–æ–∫\n' +
                  'ESC - –ø–∞—É–∑–∞/–º–µ–Ω—é\n\n' +
                  'üéØ –¶–ï–õ–¨: –°–æ–±–µ—Ä–∏ –≤—Å–µ –∂–µ–ª—Ç—ã–µ —Å—Ñ–µ—Ä—ã –∏ –∏–∑–±–µ–≥–∞–π –∫—Ä–∞—Å–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤!');
        }

        function showHighScore() {
            const highScore = localStorage.getItem('neonRacerHighScore') || 0;
            alert(`üèÜ –õ–£–ß–®–ò–ô –†–ï–ó–£–õ–¨–¢–ê–¢: ${highScore}\n\n–¢–≤–æ–π —Ç–µ–∫—É—â–∏–π —Å—á–µ—Ç: ${score}`);
            
            if (score > highScore) {
                localStorage.setItem('neonRacerHighScore', score);
                alert('üéâ –ù–û–í–´–ô –†–ï–ö–û–†–î!');
            }
        }

        // –ó–∞–ø—É—Å–∫
        init();
    </script>
</body>
</html>
